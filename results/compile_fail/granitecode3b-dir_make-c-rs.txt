warning: unused import: `CStr`
 --> /tmp/granitecode3b-dir_make-c-rs.rs:2:16
  |
2 | use std::ffi::{CStr, CString};
  |                ^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?
 --> /tmp/granitecode3b-dir_make-c-rs.rs:1:1
  |
1 | extern crate libc;
  | ^^^^^^^^^^^^^^^^^^
  |
  = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information

error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?
  --> /tmp/granitecode3b-dir_make-c-rs.rs:15:22
   |
15 |             let buf: libc::stat = Default::default();
   |                      ^^^^^^^^^^
   |
   = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information

error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?
 --> /tmp/granitecode3b-dir_make-c-rs.rs:7:44
  |
7 |     fn stat(path: *const c_char, buf: *mut libc::stat) -> i32;
  |                                            ^^^^^^^^^^
  |
  = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information

error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?
  --> /tmp/granitecode3b-dir_make-c-rs.rs:16:25
   |
16 |             if !S_ISDIR(buf.st_mode) {
   |                         ^^^^^^^^^^^
   |
   = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information

error[E0277]: the trait bound `libc::stat: Default` is not satisfied
  --> /tmp/granitecode3b-dir_make-c-rs.rs:15:35
   |
15 |             let buf: libc::stat = Default::default();
   |                                   ^^^^^^^^^^^^^^^^^^ the trait `Default` is not implemented for `libc::stat`

error[E0308]: mismatched types
  --> /tmp/granitecode3b-dir_make-c-rs.rs:16:25
   |
16 |             if !S_ISDIR(buf.st_mode) {
   |                 ------- ^^^^^^^^^^^ expected `u32`, found `u16`
   |                 |
   |                 arguments to this function are incorrect
   |
note: function defined here
  --> /tmp/granitecode3b-dir_make-c-rs.rs:8:8
   |
8  |     fn S_ISDIR(mode: u32) -> bool;
   |        ^^^^^^^
help: you can convert a `u16` to a `u32`
   |
16 |             if !S_ISDIR(buf.st_mode.into()) {
   |                                    +++++++

error: aborting due to 6 previous errors; 1 warning emitted

Some errors have detailed explanations: E0277, E0308, E0658.
For more information about an error, try `rustc --explain E0277`.
